import{d as A,_ as u,r as h,o as s,c as o,f as _,F as m,a as r,t as p,b as v,h as d,i as $,p as b,g as k}from"./index-87400ce3.js";import{a as w}from"./axios-28bc18a3.js";const x=A({name:"ArchiveItem",props:{items:Array,yearsList:Array},data(){return{}},methods:{handleTitleClick(e){console.log(e.path.substring(1,e.path.length));let t="/post/"+e.path.substring(7).replace(/\\/g,"%^").slice(0,-3);console.log(t),this.$router.push({path:t})}},mounted(){}});const C=["onClick"];function B(e,t,a,f,c,y){const n=h("el-timeline-item"),I=h("el-timeline");return s(!0),o(m,null,_(e.yearsList,l=>(s(),o("div",{key:l,class:"archive-container"},[r("h4",null,p(l),1),v(I,null,{default:d(()=>[(s(!0),o(m,null,_(this.items[l],(i,g)=>(s(),$(n,{key:g,timestamp:i.posted_time.substring(i.posted_time.indexOf("-")+1)},{default:d(()=>[r("h4",{class:"post-title",onClick:O=>e.handleTitleClick(i)},p(i.title),9,C)]),_:2},1032,["timestamp"]))),128))]),_:2},1024)]))),128)}const S=u(x,[["render",B],["__scopeId","data-v-c267f62b"]]);const T={components:{ArchiveItem:S},data(){return{archiveItems:Object,years:Array}},mounted(){this.fetchTimeItems(),this.updateData("Archives")},methods:{async fetchTimeItems(){try{const e=await w.get("http://127.0.0.1:5000/list/archive");if(e.status===200)this.archiveItems=e.data,console.log(this.archiveItems),this.years=Object.keys(this.archiveItems).sort((t,a)=>a-t),console.log(this.years);else throw new Error("Failed to fetch top-level archive items")}catch(e){console.error("Error fetching top-level menus:",e)}},updateData(e){this.$store.commit("navi",e)}}},V=e=>(b("data-v-48047b81"),e=e(),k(),e),D={id:"app"},E=V(()=>r("h1",null,"Archives",-1)),F={class:"archive-item"};function L(e,t,a,f,c,y){const n=h("ArchiveItem");return s(),o("div",D,[E,r("div",F,[v(n,{items:c.archiveItems,"years-list":c.years},null,8,["items","years-list"])])])}const q=u(T,[["render",L],["__scopeId","data-v-48047b81"]]);export{q as default};

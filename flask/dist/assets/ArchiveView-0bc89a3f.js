import{d as $,_ as u,r as h,o as s,c as a,f as _,F as m,a as o,t as p,b as v,h as d,i as A,p as b,g as k}from"./index-726f9519.js";import{a as w}from"./axios-28bc18a3.js";const x=$({name:"ArchiveItem",props:{items:Array,yearsList:Array},data(){return{}},methods:{handleTitleClick(e){console.log(e.path.substring(1,e.path.length));let t="/post/"+e.path.substring(7).replace(/\\/g,"%^").slice(0,-3);console.log(t),this.$router.push({path:t})}},mounted(){}});const C=["onClick"];function B(e,t,r,f,n,y){const c=h("el-timeline-item"),I=h("el-timeline");return s(!0),a(m,null,_(e.yearsList,l=>(s(),a("div",{key:l,class:"archive-container"},[o("h4",null,p(l),1),v(I,null,{default:d(()=>[(s(!0),a(m,null,_(this.items[l],(i,g)=>(s(),A(c,{key:g,timestamp:i.posted_time.substring(i.posted_time.indexOf("-")+1)},{default:d(()=>[o("h4",{class:"post-title",onClick:O=>e.handleTitleClick(i)},p(i.title),9,C)]),_:2},1032,["timestamp"]))),128))]),_:2},1024)]))),128)}const S=u(x,[["render",B],["__scopeId","data-v-e9baa52b"]]);const T={components:{ArchiveItem:S},data(){return{archiveItems:Object,years:[]}},mounted(){this.fetchTimeItems(),this.updateData("Archives")},methods:{async fetchTimeItems(){try{const e=await w.get("http://127.0.0.1:5000/list/archive");if(e.status===200)this.archiveItems=e.data,console.log(this.archiveItems),this.years=Object.keys(this.archiveItems).sort((t,r)=>r-t),console.log(this.years);else throw new Error("Failed to fetch top-level archive items")}catch(e){console.error("Error fetching top-level menus:",e)}},updateData(e){this.$store.commit("navi",e)}}},V=e=>(b("data-v-e167e34e"),e=e(),k(),e),D={id:"app"},E=V(()=>o("h1",null,"Archives",-1)),F={class:"archive-item"};function L(e,t,r,f,n,y){const c=h("ArchiveItem");return s(),a("div",D,[E,o("div",F,[v(c,{items:n.archiveItems,"years-list":n.years},null,8,["items","years-list"])])])}const q=u(T,[["render",L],["__scopeId","data-v-e167e34e"]]);export{q as default};
